@startuml
:iExecSCUser:
:AppProvider:
:DatasetProvider:
:WorkerpoolAdmin:
:WorkerAdmin:
:Requester:
:Anyone:

cloud {
[IexecRelay]
}
component [IexecRelay]
iExecSCUser -down-> [IexecRelay]: use

component [Marketplace]
[IexecRelay] -down-> [Marketplace]: publish userorder
AppProvider -down-> [Marketplace]: publish apporder
DatasetProvider -down-> [Marketplace]: publish dataorder
WorkerpoolAdmin -down-> [Marketplace]: publish poolorder
Requester  -down-> [Marketplace]: publish requestorder
Anyone -up-> [Marketplace]: read order

cloud {
[IexecPoCo1]
[IexecPoCo2]
[RLC Token]
}
component [IexecPoCo1]
component [IexecPoCo2]
component [RLC Token]
[IexecPoCo2] <-right-> [IexecPoCo1]
[IexecPoCo1] <-right-> [RLC Token]

Anyone -down-> [IexecPoCo1]: push matched orders
[IexecPoCo1] -up-> [Marketplace]: notification events

[iexec-scheduler] <-up-> [IexecPoCo2]
[iexec-worker] <-up-> [IexecPoCo2]

component [AppRegistry]
component [DatasetRegistry]
component [iexec-scheduler]
component [iexec-worker]
component [ResultRepository]

AppProvider -down-> AppRegistry: expose
DatasetProvider -down-> DatasetRegistry: expose 
WorkerpoolAdmin -down-> [iexec-scheduler]: manage

[WorkerAdmin] -right-> [iexec-worker]: manage
[iexec-worker] -right-> [iexec-scheduler]: get tasks
[iexec-worker] -up-> [AppRegistry]: pull applications
[iexec-worker] -up-> [DatasetRegistry]: pull datasets
[iexec-worker] -down-> [ResultRepository]: push result
[iexec-scheduler] -right-> [ResultRepository]: check present result
@enduml